"use strict";

var _this = void 0;

var icons = ['win1.png', 'win2.png', 'win3.png', 'win4.png', 'win5.png', 'win6.png', 'win7.png', 'win8.png'];
var slots = document.querySelector('.bao__slot');
var cols = document.querySelectorAll('.col');
var col1 = document.querySelector('.col-one');
var col2 = document.querySelector('.col-two');
var col3 = document.querySelector('.col-three');

for (var i in cols) {
  if (!cols.hasOwnProperty(i)) continue;
  var col = cols[i];
  var str = '';
  var firstThree = '';

  for (var x = 0; x < 20; x++) {
    var part = '<img class="icon" src="img/slots/' + icons[Math.floor(Math.random() * icons.length)] + '">';
    str += part;
    if (x < 3) firstThree += part;
  }

  var content = col.innerHTML;
  col.innerHTML = content + str + firstThree;
}

var overlay = document.querySelector('.bao__overlay');
var firstWin = document.querySelector('.bao__firstWin');
var firstWinBtn = document.querySelector('.bao__firstWin-btn');
var secondWin = document.querySelector('.bao__secondWin');
var textMain = document.querySelector('.bao__text');
var textWin = document.querySelector('.bao__textWin');
var btn = document.querySelector('.bao__btn');
var counter = '';
btn.addEventListener('click', function () {
  spin(_this);
  counter++;
});
firstWinBtn.addEventListener('click', function () {
  overlay.classList.add('opacity');
  firstWin.classList.add('hidden');
  col2.classList.remove('win');
  col3.classList.remove('win');
});

function spin(elem) {
  slots.classList.toggle('spinning', true);
  window.setTimeout(function () {
    var startIcon = document.querySelectorAll('.start');
    startIcon.forEach(function (item) {
      item.remove();
    });
    var icons = ['win1.png', 'win2.png', 'win3.png', 'win4.png', 'win5.png', 'win6.png', 'win7.png', 'win8.png'];

    if (counter === 1) {
      var results = [icons[0], icons[0], icons[0]];
      var results2 = [icons[5], icons[7], icons[6]];
      var results3 = [icons[4], icons[2], icons[3]];
      var icons = col1.querySelectorAll('.icon');
      var icons2 = col2.querySelectorAll('.icon');
      var icons3 = col3.querySelectorAll('.icon');

      for (var x = 0; x < 3; x++) {
        icons[x].setAttribute('src', 'img/slots/' + results[x]);
        icons[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results[x]);
        icons2[x].setAttribute('src', 'img/slots/' + results2[x]);
        icons2[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results2[x]);
        icons3[x].setAttribute('src', 'img/slots/' + results3[x]);
        icons3[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results3[x]);
      }

      col2.classList.add('win');
      col3.classList.add('win');
      textWin.classList.add('visible');
      setTimeout(function () {
        overlay.classList.remove('opacity');
        firstWin.classList.remove('hidden');
        textMain.innerHTML = 'One attempt left';
      }, 3300);
    } else {
      var results = [icons[0], icons[6], icons[5]];
      var results2 = [icons[2], icons[2], icons[2]];
      var icons = col1.querySelectorAll('.icon');
      var icons2 = col2.querySelectorAll('.icon');

      for (var x = 0; x < 3; x++) {
        icons[x].setAttribute('src', 'img/slots/' + results[x]);
        icons[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results[x]);
        icons2[x].setAttribute('src', 'img/slots/' + results2[x]);
        icons2[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results2[x]);
      }

      col1.classList.add('win');
      col3.classList.add('win');
      setTimeout(function () {
        overlay.classList.remove('opacity');
        secondWin.classList.remove('hidden');
      }, 3300);
    }
  }, 1500);
  window.setTimeout(function () {
    slots.classList.toggle('spinning', false);
  }.bind(elem), 3500);
}
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsiaWNvbnMiLCJzbG90cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sMSIsImNvbDIiLCJjb2wzIiwiaSIsImhhc093blByb3BlcnR5IiwiY29sIiwic3RyIiwiZmlyc3RUaHJlZSIsIngiLCJwYXJ0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwiY29udGVudCIsImlubmVySFRNTCIsIm92ZXJsYXkiLCJmaXJzdFdpbiIsImZpcnN0V2luQnRuIiwic2Vjb25kV2luIiwidGV4dE1haW4iLCJ0ZXh0V2luIiwiYnRuIiwiY291bnRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcGluIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZWxlbSIsInRvZ2dsZSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJzdGFydEljb24iLCJmb3JFYWNoIiwiaXRlbSIsInJlc3VsdHMiLCJyZXN1bHRzMiIsInJlc3VsdHMzIiwiaWNvbnMyIiwiaWNvbnMzIiwic2V0QXR0cmlidXRlIiwiYmluZCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUlBLEtBQUssR0FBRyxDQUNSLFVBRFEsRUFDRyxVQURILEVBQ2MsVUFEZCxFQUN5QixVQUR6QixFQUNvQyxVQURwQyxFQUMrQyxVQUQvQyxFQUMwRCxVQUQxRCxFQUNxRSxVQURyRSxDQUFaO0FBSUEsSUFBSUMsS0FBSyxHQUFHQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsWUFBdkIsQ0FBWjtBQUNBLElBQUlDLElBQUksR0FBR0YsUUFBUSxDQUFDRyxnQkFBVCxDQUEwQixNQUExQixDQUFYO0FBQ0EsSUFBSUMsSUFBSSxHQUFHSixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsVUFBdkIsQ0FBWDtBQUNBLElBQUlJLElBQUksR0FBR0wsUUFBUSxDQUFDQyxhQUFULENBQXVCLFVBQXZCLENBQVg7QUFDQSxJQUFJSyxJ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QUFnQkksTUFBaEIsQ0FBdUIsVUFBdkIsRUFBbUMsS0FBbkM7RUFFSCxDQUhpQixDQUdoQlksSUFIZ0IsQ0FHWGIsSUFIVyxDQUFsQixFQUdjLElBSGQ7QUFJSDtBQ2pJRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGljb25zID0gW1xuICAgICd3aW4xLnBuZycsJ3dpbjIucG5nJywnd2luMy5wbmcnLCd3aW40LnBuZycsJ3dpbjUucG5nJywnd2luNi5wbmcnLCd3aW43LnBuZycsJ3dpbjgucG5nJ1xuXTtcblxudmFyIHNsb3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhb19fc2xvdCcpO1xudmFyIGNvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sJyk7XG52YXIgY29sMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2wtb25lJyk7XG52YXIgY29sMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2wtdHdvJyk7XG52YXIgY29sMyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2wtdGhyZWUnKTtcbmZvcih2YXIgaSBpbiBjb2xzKSB7XG4gICAgaWYgKCFjb2xzLmhhc093blByb3BlcnR5KGkpKVxuICAgICAgICBjb250aW51ZTtcbiAgICB2YXIgY29sID0gY29sc1tpXTtcbiAgICB2YXIgc3RyID0gJyc7XG4gICAgdmFyIGZpcnN0VGhyZWUgPSAnJztcbiAgICBmb3IodmFyIHggPSAwOyB4IDwgMjA7IHgrKykge1xuICAgICAgICB2YXIgcGFydCA9ICc8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImltZy9zbG90cy8nK2ljb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSppY29ucy5sZW5ndGgpXSsnXCI+JztcbiAgICAgICAgc3RyICs9IHBhcnRcbiAgICAgICAgaWYgKHggPCAzKSBmaXJzdFRocmVlICs9IHBhcnQ7XG4gICAgfVxuICAgIGxldCBjb250ZW50ID0gY29sLmlubmVySFRNTFxuICAgIGNvbC5pbm5lckhUTUwgPSBjb250ZW50ICsgc3RyK2ZpcnN0VGhyZWU7XG59XG5cblxubGV0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFvX19vdmVybGF5JylcbmxldCBmaXJzdFdpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW9fX2ZpcnN0V2luJylcbmxldCBmaXJzdFdpbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW9fX2ZpcnN0V2luLWJ0bicpXG5sZXQgc2Vjb25kV2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhb19fc2Vjb25kV2luJylcbmxldCB0ZXh0TWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW9fX3RleHQnKVxubGV0IHRleHRXaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFvX190ZXh0V2luJylcbmxldCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFvX19idG4nKVxubGV0IGNvdW50ZXIgPSAnJ1xuXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHtcbiAgICBzcGluKHRoaXMpXG4gICAgY291bnRlcisrXG59KVxuXG5maXJzdFdpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eScpXG4gICAgZmlyc3RXaW4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBjb2wyLmNsYXNzTGlzdC5yZW1vdmUoJ3dpbicpXG4gICAgY29sMy5jbGFzc0xpc3QucmVtb3ZlKCd3aW4nKVxufSlcblxuZnVuY3Rpb24gc3BpbihlbGVtKSB7XG4gICAgc2xvdHMuY2xhc3NMaXN0LnRvZ2dsZSgnc3Bpbm5pbmcnLCB0cnVlKTtcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IHN0YXJ0SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFydCcpXG4gICAgICAgIHN0YXJ0SWNvbi5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS5yZW1vdmUoKVxuICAgICAgICB9KVxuICAgICAgICAgICAgdmFyIGljb25zID0gW1xuICAgICAgICAgICAgICAgICd3aW4xLnBuZycsJ3dpbjIucG5nJywnd2luMy5wbmcnLCd3aW40LnBuZycsJ3dpbjUucG5nJywnd2luNi5wbmcnLCd3aW43LnBuZycsJ3dpbjgucG5nJ1xuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgaWYoY291bnRlciA9PT0gMSl7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzBdLFxuICAgICAgICAgICAgICAgICAgICBpY29uc1swXSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbMF1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMyID0gW1xuICAgICAgICAgICAgICAgICAgICBpY29uc1s1XSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbN10sXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzZdXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzMyA9IFtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbNF0sXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzJdLFxuICAgICAgICAgICAgICAgICAgICBpY29uc1szXVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB2YXIgaWNvbnMgPSBjb2wxLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pY29uJyk7XG4gICAgICAgICAgICAgICAgdmFyIGljb25zMiA9IGNvbDIucXVlcnlTZWxlY3RvckFsbCgnLmljb24nKTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbnMzID0gY29sMy5xdWVyeVNlbGVjdG9yQWxsKCcuaWNvbicpO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgeCA9IDA7IHggPCAzOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbeF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0c1t4XSk7XG4gICAgICAgICAgICAgICAgICAgIGljb25zWyhpY29ucy5sZW5ndGgtMykreF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0c1t4XSk7XG4gICAgICAgICAgICAgICAgICAgIGljb25zMlt4XS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJytyZXN1bHRzMlt4XSk7XG4gICAgICAgICAgICAgICAgICAgIGljb25zMlsoaWNvbnMubGVuZ3RoLTMpK3hdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nK3Jlc3VsdHMyW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnMzW3hdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nK3Jlc3VsdHMzW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnMzWyhpY29ucy5sZW5ndGgtMykreF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0czNbeF0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbDIuY2xhc3NMaXN0LmFkZCgnd2luJylcbiAgICAgICAgICAgICAgICBjb2wzLmNsYXNzTGlzdC5hZGQoJ3dpbicpXG4gICAgICAgICAgICAgICAgdGV4dFdpbi5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJylcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5JylcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RXaW4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgICAgICAgICAgICAgdGV4dE1haW4uaW5uZXJIVE1MID0gJ09uZSBhdHRlbXB0IGxlZnQnXG5cbiAgICAgICAgICAgICAgICB9LCAzMzAwKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzZdLFxuICAgICAgICAgICAgICAgICAgICBpY29uc1s1XVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0czIgPSBbXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzJdLFxuICAgICAgICAgICAgICAgICAgICBpY29uc1syXSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbMl1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgdmFyIGljb25zID0gY29sMS5xdWVyeVNlbGVjdG9yQWxsKCcuaWNvbicpO1xuICAgICAgICAgICAgICAgIHZhciBpY29uczIgPSBjb2wyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pY29uJyk7XG4gICAgICAgICAgICAgICAgZm9yKHZhciB4ID0gMDsgeCA8IDM7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBpY29uc1t4XS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJytyZXN1bHRzW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbKGljb25zLmxlbmd0aC0zKSt4XS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJytyZXN1bHRzW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnMyW3hdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nK3Jlc3VsdHMyW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnMyWyhpY29ucy5sZW5ndGgtMykreF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0czJbeF0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbDEuY2xhc3NMaXN0LmFkZCgnd2luJylcbiAgICAgICAgICAgICAgICBjb2wzLmNsYXNzTGlzdC5hZGQoJ3dpbicpXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnb3BhY2l0eScpXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZFdpbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAgIH0sIDMzMDApO1xuICAgICAgICAgICAgfVxuICAgIH0sIDE1MDApO1xuXG5cbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgc2xvdHMuY2xhc3NMaXN0LnRvZ2dsZSgnc3Bpbm5pbmcnLCBmYWxzZSk7XG5cbiAgICB9LmJpbmQoZWxlbSksIDM1MDApO1xufVxuIiwiIl19
