"use strict";

var _this = void 0;

var icons = ['win1.png', 'win2.png', 'win3.png', 'win4.png', 'win5.png', 'win6.png', 'win7.png', 'win8.png'];
var slots = document.querySelector('.bao__slot');
var cols = document.querySelectorAll('.col');
var col1 = document.querySelector('.col-one');
var col2 = document.querySelector('.col-two');
var col3 = document.querySelector('.col-three');

for (var i in cols) {
  if (!cols.hasOwnProperty(i)) continue;
  var col = cols[i];
  var str = '';
  var firstThree = '';

  for (var x = 0; x < 20; x++) {
    var part = '<img class="icon" src="img/slots/' + icons[Math.floor(Math.random() * icons.length)] + '">';
    str += part;
    if (x < 3) firstThree += part;
  }

  var content = col.innerHTML;
  col.innerHTML = content + str + firstThree;
}

var overlay = document.querySelector('.bao__overlay');
var firstWin = document.querySelector('.bao__firstWin');
var firstWinBtn = document.querySelector('.bao__firstWin-btn');
var secondWin = document.querySelector('.bao__secondWin');
var textMain = document.querySelector('.bao__text');
var textWin = document.querySelector('.bao__textWin');
var btn = document.querySelector('.bao__btn');
var counter = '';
btn.addEventListener('click', function () {
  spin(_this);
  counter++;
});
firstWinBtn.addEventListener('click', function () {
  overlay.classList.add('opacity');
  firstWin.classList.add('hidden');
  col2.classList.remove('win');
  col3.classList.remove('win');
});

function spin(elem) {
  slots.classList.toggle('spinning', true);
  window.setTimeout(function () {
    var startIcon = document.querySelectorAll('.start');
    startIcon.forEach(function (item) {
      item.style.display = 'none';
    });
    var icons = ['win1.png', 'win2.png', 'win3.png', 'win4.png', 'win5.png', 'win6.png', 'win7.png', 'win8.png'];

    if (counter === 1) {
      var results1 = [icons[0], icons[0], icons[0]];
      var results2 = [icons[5], icons[7], icons[6]];
      var results3 = [icons[4], icons[2], icons[3]];
      var icons = col1.querySelectorAll('.icon');
      var icons2 = col2.querySelectorAll('.icon');
      var icons3 = col3.querySelectorAll('.icon');

      for (var x = 0; x < 3; x++) {
        icons[x].setAttribute('src', 'img/slots/' + results1[x]);
        icons[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results1[x]);
        icons2[x].setAttribute('src', 'img/slots/' + results2[x]);
        icons2[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results2[x]);
        icons3[x].setAttribute('src', 'img/slots/' + results3[x]);
        icons3[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results3[x]);
      }

      col2.classList.add('win');
      col3.classList.add('win');
      textWin.classList.add('visible');
      setTimeout(function () {
        overlay.classList.remove('opacity');
        firstWin.classList.remove('hidden');
        textMain.innerHTML = 'One attempt left';
      }, 3300);
    } else {
      var results1 = [icons[0], icons[6], icons[5]];
      var results2 = [icons[2], icons[2], icons[2]];
      var icons = col1.querySelectorAll('.icon');
      var icons2 = col2.querySelectorAll('.icon');

      for (var x = 0; x < 3; x++) {
        icons[x].setAttribute('src', 'img/slots/' + results1[x]);
        icons[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results1[x]);
        icons2[x].setAttribute('src', 'img/slots/' + results2[x]);
        icons2[icons.length - 3 + x].setAttribute('src', 'img/slots/' + results2[x]);
      }

      col1.classList.add('win');
      col3.classList.add('win');
      setTimeout(function () {
        overlay.classList.remove('opacity');
        secondWin.classList.remove('hidden');
      }, 3300);
    }
  }, 1500);
  window.setTimeout(function () {
    slots.classList.toggle('spinning', false);
  }.bind(elem), 3500);
}
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsiaWNvbnMiLCJzbG90cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sMSIsImNvbDIiLCJjb2wzIiwiaSIsImhhc093blByb3BlcnR5IiwiY29sIiwic3RyIiwiZmlyc3RUaHJlZSIsIngiLCJwYXJ0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwiY29udGVudCIsImlubmVySFRNTCIsIm92ZXJsYXkiLCJmaXJzdFdpbiIsImZpcnN0V2luQnRuIiwic2Vjb25kV2luIiwidGV4dE1haW4iLCJ0ZXh0V2luIiwiYnRuIiwiY291bnRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcGluIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZWxlbSIsInRvZ2dsZSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJzdGFydEljb24iLCJmb3JFYWNoIiwiaXRlbSIsInN0eWxlIiwiZGlzcGxheSIsInJlc3VsdHMxIiwicmVzdWx0czIiLCJyZXN1bHRzMyIsImljb25zMiIsImljb25zMyIsInNldEF0dHJpYnV0ZSIsImJpbmQiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFJQSxLQUFLLEdBQUcsQ0FDUixVQURRLEVBQ0csVUFESCxFQUNjLFVBRGQsRUFDeUIsVUFEekIsRUFDb0MsVUFEcEMsRUFDK0MsVUFEL0MsRUFDMEQsVUFEMUQsRUFDcUUsVUFEckUsQ0FBWjtBQUlBLElBQUlDLEtBQUssR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLFlBQXZCLENBQVo7QUFDQSxJQUFJQyxJQUFJLEdBQUdGLFFBQVEsQ0FBQ0csZ0JBQVQsQ0FBMEIsTUFBMUIsQ0FBWDtBQUNBLElBQUlDLElBQUksR0FBR0osUUFBUSxDQUFDQyxhQUFULENBQXVCLFVBQXZCLENBQVg7QUFDQSxJQUFJSSxJQUFJLEdBQUdMLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixVQUF2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VUFBUCxDQUFrQixZQUFXO0lBQ3pCckMsS0FBSyxDQUFDK0IsU0FBTixDQUFnQkksTUFBaEIsQ0FBdUIsVUFBdkIsRUFBbUMsS0FBbkM7RUFFSCxDQUhpQixDQUdoQmMsSUFIZ0IsQ0FHWGYsSUFIVyxDQUFsQixFQUdjLElBSGQ7QUFJSDtBQ2pJRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGljb25zID0gW1xuICAgICd3aW4xLnBuZycsJ3dpbjIucG5nJywnd2luMy5wbmcnLCd3aW40LnBuZycsJ3dpbjUucG5nJywnd2luNi5wbmcnLCd3aW43LnBuZycsJ3dpbjgucG5nJ1xuXTtcblxudmFyIHNsb3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhb19fc2xvdCcpO1xudmFyIGNvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sJyk7XG52YXIgY29sMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2wtb25lJyk7XG52YXIgY29sMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2wtdHdvJyk7XG52YXIgY29sMyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2wtdGhyZWUnKTtcbmZvcih2YXIgaSBpbiBjb2xzKSB7XG4gICAgaWYgKCFjb2xzLmhhc093blByb3BlcnR5KGkpKVxuICAgICAgICBjb250aW51ZTtcbiAgICB2YXIgY29sID0gY29sc1tpXTtcbiAgICB2YXIgc3RyID0gJyc7XG4gICAgdmFyIGZpcnN0VGhyZWUgPSAnJztcbiAgICBmb3IodmFyIHggPSAwOyB4IDwgMjA7IHgrKykge1xuICAgICAgICB2YXIgcGFydCA9ICc8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImltZy9zbG90cy8nK2ljb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSppY29ucy5sZW5ndGgpXSsnXCI+JztcbiAgICAgICAgc3RyICs9IHBhcnRcbiAgICAgICAgaWYgKHggPCAzKSBmaXJzdFRocmVlICs9IHBhcnQ7XG4gICAgfVxuICAgIGxldCBjb250ZW50ID0gY29sLmlubmVySFRNTFxuICAgIGNvbC5pbm5lckhUTUwgPSBjb250ZW50ICsgc3RyK2ZpcnN0VGhyZWU7XG59XG5cblxubGV0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFvX19vdmVybGF5JylcbmxldCBmaXJzdFdpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW9fX2ZpcnN0V2luJylcbmxldCBmaXJzdFdpbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW9fX2ZpcnN0V2luLWJ0bicpXG5sZXQgc2Vjb25kV2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhb19fc2Vjb25kV2luJylcbmxldCB0ZXh0TWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW9fX3RleHQnKVxubGV0IHRleHRXaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFvX190ZXh0V2luJylcbmxldCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFvX19idG4nKVxubGV0IGNvdW50ZXIgPSAnJ1xuXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHtcbiAgICBzcGluKHRoaXMpXG4gICAgY291bnRlcisrXG59KVxuXG5maXJzdFdpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eScpXG4gICAgZmlyc3RXaW4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBjb2wyLmNsYXNzTGlzdC5yZW1vdmUoJ3dpbicpXG4gICAgY29sMy5jbGFzc0xpc3QucmVtb3ZlKCd3aW4nKVxufSlcblxuZnVuY3Rpb24gc3BpbihlbGVtKSB7XG4gICAgc2xvdHMuY2xhc3NMaXN0LnRvZ2dsZSgnc3Bpbm5pbmcnLCB0cnVlKTtcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IHN0YXJ0SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFydCcpXG4gICAgICAgIHN0YXJ0SWNvbi5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIH0pXG4gICAgICAgICAgICB2YXIgaWNvbnMgPSBbXG4gICAgICAgICAgICAgICAgJ3dpbjEucG5nJywnd2luMi5wbmcnLCd3aW4zLnBuZycsJ3dpbjQucG5nJywnd2luNS5wbmcnLCd3aW42LnBuZycsJ3dpbjcucG5nJywnd2luOC5wbmcnXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBpZihjb3VudGVyID09PSAxKXtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0czEgPSBbXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzBdLFxuICAgICAgICAgICAgICAgICAgICBpY29uc1swXSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbMF1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMyID0gW1xuICAgICAgICAgICAgICAgICAgICBpY29uc1s1XSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbN10sXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzZdXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzMyA9IFtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbNF0sXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzJdLFxuICAgICAgICAgICAgICAgICAgICBpY29uc1szXVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB2YXIgaWNvbnMgPSBjb2wxLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pY29uJyk7XG4gICAgICAgICAgICAgICAgdmFyIGljb25zMiA9IGNvbDIucXVlcnlTZWxlY3RvckFsbCgnLmljb24nKTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbnMzID0gY29sMy5xdWVyeVNlbGVjdG9yQWxsKCcuaWNvbicpO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgeCA9IDA7IHggPCAzOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbeF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0czFbeF0pO1xuICAgICAgICAgICAgICAgICAgICBpY29uc1soaWNvbnMubGVuZ3RoLTMpK3hdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nK3Jlc3VsdHMxW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnMyW3hdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nK3Jlc3VsdHMyW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnMyWyhpY29ucy5sZW5ndGgtMykreF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0czJbeF0pO1xuICAgICAgICAgICAgICAgICAgICBpY29uczNbeF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0czNbeF0pO1xuICAgICAgICAgICAgICAgICAgICBpY29uczNbKGljb25zLmxlbmd0aC0zKSt4XS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJytyZXN1bHRzM1t4XSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29sMi5jbGFzc0xpc3QuYWRkKCd3aW4nKVxuICAgICAgICAgICAgICAgIGNvbDMuY2xhc3NMaXN0LmFkZCgnd2luJylcbiAgICAgICAgICAgICAgICB0ZXh0V2luLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHknKVxuICAgICAgICAgICAgICAgICAgICBmaXJzdFdpbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAgICAgICB0ZXh0TWFpbi5pbm5lckhUTUwgPSAnT25lIGF0dGVtcHQgbGVmdCdcblxuICAgICAgICAgICAgICAgIH0sIDMzMDApO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzMSA9IFtcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzZdLFxuICAgICAgICAgICAgICAgICAgICBpY29uc1s1XVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0czIgPSBbXG4gICAgICAgICAgICAgICAgICAgIGljb25zWzJdLFxuICAgICAgICAgICAgICAgICAgICBpY29uc1syXSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbMl1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgdmFyIGljb25zID0gY29sMS5xdWVyeVNlbGVjdG9yQWxsKCcuaWNvbicpO1xuICAgICAgICAgICAgICAgIHZhciBpY29uczIgPSBjb2wyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pY29uJyk7XG4gICAgICAgICAgICAgICAgZm9yKHZhciB4ID0gMDsgeCA8IDM7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBpY29uc1t4XS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJytyZXN1bHRzMVt4XSk7XG4gICAgICAgICAgICAgICAgICAgIGljb25zWyhpY29ucy5sZW5ndGgtMykreF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0czFbeF0pO1xuICAgICAgICAgICAgICAgICAgICBpY29uczJbeF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrcmVzdWx0czJbeF0pO1xuICAgICAgICAgICAgICAgICAgICBpY29uczJbKGljb25zLmxlbmd0aC0zKSt4XS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJytyZXN1bHRzMlt4XSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29sMS5jbGFzc0xpc3QuYWRkKCd3aW4nKVxuICAgICAgICAgICAgICAgIGNvbDMuY2xhc3NMaXN0LmFkZCgnd2luJylcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5JylcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kV2luLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICAgICAgICAgICAgfSwgMzMwMCk7XG4gICAgICAgICAgICB9XG4gICAgfSwgMTUwMCk7XG5cblxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBzbG90cy5jbGFzc0xpc3QudG9nZ2xlKCdzcGlubmluZycsIGZhbHNlKTtcblxuICAgIH0uYmluZChlbGVtKSwgMzUwMCk7XG59XG4iLCIiXX0=
